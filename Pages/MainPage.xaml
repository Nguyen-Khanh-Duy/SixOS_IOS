<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="SixOSDatKhamAppMobile.MainPage" 
             NavigationPage.HasNavigationBar="False"
             Title="Đặt lịch khám">
    <Grid BackgroundColor="{StaticResource BackgroundColor}">
        <!-- Dùng AbsoluteLayout làm container chính -->
        <AbsoluteLayout>

            <!-- ScrollView chính chiếm toàn bộ màn hình -->
            <ScrollView AbsoluteLayout.LayoutBounds="0,0,1,1"
                        AbsoluteLayout.LayoutFlags="All">
                <Grid RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto"
                      BackgroundColor="{StaticResource BackgroundColor}"
                      Padding="10">

                    <!-- Header -->
                    <Frame Grid.Row="0"
                           BackgroundColor="{StaticResource White}"
                           CornerRadius="0"
                           Padding="0"
                           Margin="0,0,0,10"
                           HasShadow="True">

                        <Grid ColumnDefinitions="Auto,*,Auto">
                            <!-- Logo bệnh viện trái -->
                            <Image Grid.Column="0"
                                   Source="logo.jpg"
                                   HeightRequest="80"
                                   WidthRequest="80"
                                   Margin="5,2,5,2"
                                   VerticalOptions="Center"
                                   Aspect="AspectFit" />

                            <!-- Tiêu đề 2 dòng -->
                            <VerticalStackLayout Grid.Column="1"
                                                 Spacing="0"
                                                 VerticalOptions="Center"
                                                 Margin="0,10">

                                <Label Text="Bệnh viện Ung Bướu"
                                       TextColor="#007bff"
                                       FontSize="18"
                                       FontAttributes="Bold"
                                       HorizontalOptions="Start" />

                                <Label Text="Thành phố Hồ Chí Minh"
                                       TextColor="#007bff"
                                       FontSize="14"
                                       HorizontalOptions="Start"
                                       Margin="0,-1,0,0" />
                            </VerticalStackLayout>


                            <!-- Nút đăng nhập bên phải -->
                            <Button Grid.Column="2"
                                    Text="Đăng nhập"
                                    TextColor="{StaticResource PrimaryColor}"
                                    BackgroundColor="White"
                                    CornerRadius="16"
                                    FontAttributes="Bold"
                                    Margin="0,0,0,22"
                                    Padding="12,6"
                                    Clicked="OnDangNhapClicked"
                                    VerticalOptions="Center"/>
                        </Grid>
                    </Frame>

                    <!-- Banner Carousel -->
                    <Border Grid.Row="1"
                            BackgroundColor="Transparent"
                            StrokeShape="RoundRectangle 0"
                            Padding="0"
                            Margin="10,0,10,5" 
                            Stroke="Transparent">
                        <Grid>
                            <Grid HeightRequest="220" 
                                  Margin="0,0,0,15">

                                <!-- Carousel tự động chạy -->
                                <CarouselView x:Name="AutoCarousel"
                                              Loop="True"
                                              IsScrollAnimated="True"
                                              IsEnabled="False"
                                              PeekAreaInsets="0"
                                              Margin="0"
                                              PositionChanged="AutoCarousel_PositionChanged">

                                    <CarouselView.ItemsSource>
                                        <x:Array Type="{x:Type x:String}">
                                            <x:String>dichvu.jpg</x:String>
                                            <x:String>quangcao.jpg</x:String>
                                            <x:String>dichvu.jpg</x:String>
                                            <x:String>quangcao.jpg</x:String>
                                        </x:Array>
                                    </CarouselView.ItemsSource>

                                    <CarouselView.ItemTemplate>
                                        <DataTemplate>
                                            <Border Stroke="Transparent"
                                                    StrokeThickness="0"
                                                    BackgroundColor="Transparent"
                                                    StrokeShape="RoundRectangle 40,0,0,40"
                                                    Margin="0">
                                                <Grid>
                                                    <Image Source="{Binding .}"
                                                           Aspect="AspectFill"
                                                           HeightRequest="220"/>

                                                    <BoxView Color="#40808080"/>

                                                    <VerticalStackLayout VerticalOptions="Center"
                                                         Padding="25"
                                                         Spacing="5">
                                                        <Label Text="BỆNH VIỆN UNG BƯỚU"
                                                               TextColor="White"
                                                               FontSize="16"
                                                               FontAttributes="Bold"/>

                                                        <Label Text="Chăm sóc sức khỏe toàn diện"
                                                               TextColor="#EEEEEE"
                                                               FontSize="14"/>
                                                    </VerticalStackLayout>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </CarouselView.ItemTemplate>
                                </CarouselView>

                                <!-- Indicator dots -->
                                <IndicatorView x:Name="CarouselIndicator"
                                               IndicatorColor="#80FFFFFF"
                                               SelectedIndicatorColor="White"
                                               HorizontalOptions="Center"
                                               VerticalOptions="End"
                                               Margin="0,0,0,15"/>
                            </Grid>
                        </Grid>
                    </Border>

                    <!-- GÓI KHÁM Section -->
                    <Frame Grid.Row="2"
                           BackgroundColor="{StaticResource White}"
                           CornerRadius="10"
                           Padding="0"
                           Margin="0,0,0,20"
                           HasShadow="True">
                        <VerticalStackLayout Spacing="0">
                            <Frame BackgroundColor="{StaticResource PrimaryColor}"
                                   CornerRadius="10"
                                   Padding="135,10">
                                <HorizontalStackLayout VerticalOptions="Center">
                                    <Label Text="GÓI KHÁM"
                                           FontFamily="MontserratBold"
                                           FontSize="20"
                                           TextColor="White"
                                           FontAttributes="Bold"
                                           HorizontalOptions="Center"
                                           VerticalOptions="Center">
                                        <Label.Shadow>
                                            <Shadow Brush="Black"
                                                    Opacity="0.3"
                                                    Offset="1,1"
                                                    Radius="1"/>
                                        </Label.Shadow>
                                    </Label>
                                </HorizontalStackLayout>
                            </Frame>

                            <!-- Danh sách gói khám -->
                            <CollectionView x:Name="GoiKhamCollectionView"
                                            ItemsSource="{Binding DanhSachGoiKham}"
                                            Margin="12,10"
                                            SelectionMode="None">
                                <CollectionView.ItemsLayout>
                                    <LinearItemsLayout Orientation="Horizontal"
                                                       ItemSpacing="15"/>
                                </CollectionView.ItemsLayout>
                                <CollectionView.ItemTemplate>
                                    <DataTemplate>
                                        <Frame WidthRequest="180"
                                               HeightRequest="267"
                                               BorderColor="LightGray"
                                               BackgroundColor="{StaticResource White}"
                                               CornerRadius="15"
                                               Padding="0"
                                               HasShadow="True">
                                            <Grid RowDefinitions="120,Auto,50,Auto,40">
                                                <Image Grid.Row="0"
                                                       Source="dichvu.jpg"
                                                       Aspect="AspectFill"/>

                                                <VerticalStackLayout Grid.Row="2"
                                                                     Padding="5,5,10,0"
                                                                     Spacing="2"
                                                                     HorizontalOptions="Center">

                                                    <!-- Tên gói (đã sạch) -->
                                                    <Label Text="{Binding TenGoiHienThi}"
                                                           FontSize="15"
                                                           FontAttributes="Bold"
                                                           TextColor="{StaticResource TextColor}"
                                                           HorizontalTextAlignment="Center"
                                                           LineBreakMode="WordWrap"
                                                           MaxLines="2"/>

                                                    <!-- Loại gói -->
                                                    <Label Text="[cơ bản]"
                                                           FontSize="12"
                                                           TextColor="#666666"
                                                           IsVisible="{Binding GoiCoBan}"
                                                           HorizontalTextAlignment="Center"/>

                                                    <Label Text="[nâng cao]"
                                                           FontSize="12"
                                                           TextColor="#666666"
                                                           IsVisible="{Binding GoiNangCao}"
                                                           HorizontalTextAlignment="Center"/>
                                                </VerticalStackLayout>

                                                <HorizontalStackLayout Grid.Row="3"
                                                                       Spacing="5"
                                                                       Padding="10,20,10,10"
                                                                       HorizontalOptions="Center"
                                                                       VerticalOptions="Start">

                                                    <Label TextColor="#E53935"
                                                           FontSize="18"
                                                           FontAttributes="Bold"
                                                           HorizontalTextAlignment="Center">
                                                        <Label.Text>
                                                            <Binding Path="TongTien" StringFormat="{}{0:N0}đ"/>
                                                        </Label.Text>
                                                    </Label>

                                                </HorizontalStackLayout>


                                                <Button Grid.Row="4"
                                                        Text="ĐẶT LỊCH NGAY"
                                                        BackgroundColor="#007bff"
                                                        TextColor="White"
                                                        FontSize="12"
                                                        FontAttributes="Bold"
                                                        CornerRadius="15"
                                                        WidthRequest="179"
                                                        HeightRequest="40"
                                                        Margin="0"
                                                        Padding="0"
                                                        CommandParameter="{Binding Id}"
                                                        Clicked="OnBookServiceClicked"/>
                                            </Grid>
                                        </Frame>
                                    </DataTemplate>
                                </CollectionView.ItemTemplate>
                            </CollectionView>
                        </VerticalStackLayout>
                    </Frame>

                    <!-- CHUYÊN GIA Section -->
                    <Frame Grid.Row="3"
                           BackgroundColor="{StaticResource White}"
                           CornerRadius="10"
                           Padding="0"
                           Margin="0,0,0,20"
                           HasShadow="True">
                        <VerticalStackLayout Spacing="0">
                            <Frame BackgroundColor="{StaticResource PrimaryColor}"
                                   CornerRadius="10"
                                   Padding="125,10">
                                <HorizontalStackLayout VerticalOptions="Center">
                                    <Label Text="CHUYÊN GIA"
                                           FontFamily="MontserratBold"
                                           FontSize="20"
                                           TextColor="White"
                                           FontAttributes="Bold"
                                           HorizontalOptions="Center"
                                           VerticalOptions="Center">
                                        <Label.Shadow>
                                            <Shadow Brush="Black"
                                                    Opacity="0.3"
                                                    Offset="1,1"
                                                    Radius="1"/>
                                        </Label.Shadow>
                                    </Label>
                                </HorizontalStackLayout>
                            </Frame>

                            <!-- Danh sách chuyên gia -->
                            <CollectionView x:Name="ChuyenGiaCollectionView"
                                            ItemsSource="{Binding DanhSachChuyenGia}"
                                            Margin="12,10"
                                            SelectionMode="None">
                                <CollectionView.ItemsLayout>
                                    <LinearItemsLayout Orientation="Horizontal"
                                                       ItemSpacing="15"/>
                                </CollectionView.ItemsLayout>
                                <CollectionView.ItemTemplate>
                                    <DataTemplate>
                                        <Frame WidthRequest="178"
                                               HeightRequest="264"
                                               BorderColor="LightGray"
                                               BackgroundColor="{StaticResource White}"
                                               CornerRadius="15"
                                               Padding="0"
                                               HasShadow="True">
                                            <Grid RowDefinitions="180,*,40">
                                                <Image Grid.Row="0"
                                                       Source="{Binding DuongDanHinh, FallbackValue='avatar.jpg'}"
                                                       Aspect="AspectFill"/>

                                                <VerticalStackLayout Grid.Row="1"
                                                                     Spacing="5"
                                                                     Padding="10">
                                                    <Label Text="{Binding HocVi}"
                                                           TextColor="#666666"
                                                           FontSize="11"
                                                           LineBreakMode="TailTruncation"
                                                           MaxLines="1"/>

                                                    <Label Text="{Binding TenChuyenGia}"
                                                           TextColor="{StaticResource TextColor}"
                                                           FontSize="14"
                                                           FontAttributes="Bold"
                                                           LineBreakMode="TailTruncation"
                                                           MaxLines="2"/>
                                                </VerticalStackLayout>
                                            </Grid>
                                        </Frame>
                                    </DataTemplate>
                                </CollectionView.ItemTemplate>
                            </CollectionView>
                        </VerticalStackLayout>
                    </Frame>

                    <!-- Tin tức mới nhất Section -->
                    <Frame Grid.Row="4"
                           BackgroundColor="Transparent"
                           Padding="0"
                           Margin="5,0,0,0">
                        <Grid ColumnDefinitions="*,Auto">
                            <Label Grid.Column="0"
                                   Text="Tin tức mới nhất"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   TextColor="{StaticResource PrimaryColor}"
                                   VerticalOptions="Center"/>

                         
                        </Grid>
                    </Frame>

                    <!-- Separator -->
                    <BoxView Grid.Row="5"
                             HeightRequest="1"
                             Color="{StaticResource LightGray}"
                             Margin="0,10"/>

                    <!-- Quảng cáo bệnh viện -->
                    <Frame Grid.Row="6"
                           BackgroundColor="{StaticResource White}"
                           CornerRadius="10"
                           Padding="0"
                           Margin="0,0,0,20"
                           HasShadow="True">
                        <Grid>
                            <Grid HeightRequest="200">

                                <!-- Carousel quảng cáo tự động chạy -->
                                <CarouselView x:Name="QuangCaoCarousel"
                                              Loop="True"
                                              IsScrollAnimated="True"
                                              IsEnabled="False"
                                              PeekAreaInsets="0"
                                              Margin="0">

                                    <CarouselView.ItemsSource>
                                        <x:Array Type="{x:Type x:String}">
                                            <x:String>dichvu.jpg</x:String>
                                            <x:String>quangcao.jpg</x:String>
                                            <x:String>dichvu.jpg</x:String>
                                            <x:String>quangcao.jpg</x:String>
                                        </x:Array>
                                    </CarouselView.ItemsSource>

                                    <CarouselView.ItemTemplate>
                                        <DataTemplate>
                                            <Grid>
                                                <Image Source="{Binding .}"
                                                       Aspect="AspectFill"
                                                       HeightRequest="200"/>
                                            </Grid>
                                        </DataTemplate>
                                    </CarouselView.ItemTemplate>
                                </CarouselView>

                                <!-- Indicator dots cho quảng cáo -->
                                <IndicatorView x:Name="QuangCaoIndicator"
                                               IndicatorColor="#80FFFFFF"
                                               SelectedIndicatorColor="White"
                                               HorizontalOptions="Center"
                                               VerticalOptions="End"
                                               Margin="0,0,0,10"/>
                            </Grid>
                        </Grid>
                    </Frame>

                    <!-- Thời gian làm việc & Hướng dẫn sử dụng -->
                    <Frame Grid.Row="7"
                           BackgroundColor="{StaticResource White}"
                           CornerRadius="10"
                           Padding="15"
                           Margin="0,0,0,20"
                           HasShadow="True">
                        <VerticalStackLayout Spacing="15">

                            <!-- Hướng dẫn sử dụng app -->
                            <VerticalStackLayout Spacing="10">
                                <Label Text="📱 HƯỚNG DẪN ĐẶT LỊCH"
                                       FontSize="16"
                                       FontAttributes="Bold"
                                       TextColor="{StaticResource PrimaryColor}"/>
                                <!-- Separator -->
                                <BoxView HeightRequest="1"
                                         Color="{StaticResource LightGray}"/>
                                <!-- 1. Đặt lịch khám -->
                                <Frame BackgroundColor="#F0F8FF"
                                       CornerRadius="8"
                                       Padding="12"
                                       HasShadow="False">

                                    <!-- Thêm GestureRecognizer vào đây -->
                                    <Frame.GestureRecognizers>
                                        <TapGestureRecognizer Tapped="OnHowToBookAppointmentTapped"/>
                                    </Frame.GestureRecognizers>
                                    <HorizontalStackLayout Spacing="12"
                                                           VerticalOptions="Center">
                                        <Image Source="tt.png"
                                               WidthRequest="30"
                                               HeightRequest="30"/>
                                        <VerticalStackLayout>
                                            <Label Text="Đặt lịch khám"
                                                   FontSize="14"
                                                   FontAttributes="Bold"
                                                   TextColor="Black"/>


                                            <HorizontalStackLayout Spacing="4"
                                                                   Margin="0,5,0,0"
                                                                   HorizontalOptions="Center">

                                                <Label Text="Nhấn để xem video hướng dẫn"
                                                       FontSize="10"
                                                       TextColor="#007bff"/>

                                            </HorizontalStackLayout>


                                        </VerticalStackLayout>
                                        <Label Text="▶️"
                                               FontSize="30"
                                               TextColor="#007bff"
                                               Margin="70,0,0,0"/>

                                    </HorizontalStackLayout>
                                </Frame>

                                <!-- 2. Tra cứu lịch hẹn -->
                                <Frame BackgroundColor="#F0F8FF"
                                       CornerRadius="8"
                                       Padding="12"
                                       HasShadow="False">

                                    <!-- Thêm GestureRecognizer -->
                                    <Frame.GestureRecognizers>
                                        <TapGestureRecognizer Tapped="OnHowToCheckAppointmentTapped"/>
                                    </Frame.GestureRecognizers>

                                    <HorizontalStackLayout Spacing="12"
                                                           VerticalOptions="Center">

                                        <Image Source="lichhen.png"
                                               WidthRequest="30"
                                               HeightRequest="30"/>

                                        <VerticalStackLayout>

                                            <Label Text="Tra cứu lịch hẹn"
                                                   FontSize="14"
                                                   FontAttributes="Bold"
                                                   TextColor="Black"/>

                                            <!-- Text + ▶️ tách riêng -->
                                            <HorizontalStackLayout Spacing="4"
                                                                   Margin="0,5,0,0">

                                                <Label Text="Nhấn để xem video hướng dẫn"
                                                       FontSize="10"
                                                       TextColor="#007bff"/>
                                            </HorizontalStackLayout>

                                        </VerticalStackLayout>
                                        <Label Text="▶️"
                                               FontSize="30"
                                               TextColor="#007bff"
                                               Margin="70,0,0,0"/>

                                    </HorizontalStackLayout>
                                </Frame>
                            </VerticalStackLayout>
                        </VerticalStackLayout>
                    </Frame>

                    <!-- Địa chỉ bệnh viện -->
                    <Frame Grid.Row="8"
                           BackgroundColor="{StaticResource White}"
                           CornerRadius="10"
                           Padding="15"
                           Margin="0,0,0,20"
                           HasShadow="True">
                        <VerticalStackLayout Spacing="15">

                            <!-- Thời gian làm việc -->
                            <VerticalStackLayout Spacing="10">
                                <Label Text="⏰ THỜI GIAN LÀM VIỆC"
                                       FontSize="16"
                                       FontAttributes="Bold"
                                       TextColor="{StaticResource PrimaryColor}"/>

                                <Grid ColumnDefinitions="*,Auto">
                                    <Label Grid.Column="0"
                                           Text="Thứ 2 - Thứ 6"
                                           TextColor="Black"/>
                                    <Label Grid.Column="1"
                                           Text="7:30 - 16:30"
                                           TextColor="Black"
                                           FontAttributes="Bold"/>
                                </Grid>
                            </VerticalStackLayout>

                            <!-- Separator -->
                            <BoxView HeightRequest="1"
                                     Color="{StaticResource LightGray}"/>

                            <!-- Địa chỉ bệnh viện - 2 cơ sở trong 2 ô -->
                            <VerticalStackLayout Spacing="10">
                                <Label Text="📍 ĐIẠ CHỈ"
                                       FontSize="16"
                                       FontAttributes="Bold"
                                       TextColor="{StaticResource PrimaryColor}"/>

                                <Label Text="Bệnh viện Ung Bướu TP. Hồ Chí Minh"
                                       FontSize="18"
                                       FontAttributes="Bold"
                                       TextColor="#111111"
                                       Margin="0,0,0,10"
                                       HorizontalTextAlignment="Center"
                                       HorizontalOptions="Center"/>

                                <!-- 2 ô chứa 2 cơ sở -->
                                <Grid RowDefinitions="Auto,Auto"
                                      RowSpacing="10">

                                    <!-- Ô Cơ sở 1 -->
                                    <Frame Grid.Row="0"
                                           BackgroundColor="#F0F8FF"
                                           CornerRadius="8"
                                           Padding="12"
                                           HasShadow="False">

                                        <VerticalStackLayout Spacing="10">

                                            <!-- Tiêu đề + nút xem bản đồ -->
                                            <HorizontalStackLayout Spacing="8"
                                                                   VerticalOptions="Center">

                                                <Label Text="🏥 Cơ sở 1"
                                                       FontSize="14"
                                                       FontAttributes="Bold"
                                                       TextColor="{StaticResource PrimaryColor}"
                                                       HorizontalOptions="StartAndExpand"/>

                                                <Button Text="🗺️ Xem bản đồ"
                                                        TextColor="{StaticResource PrimaryColor}"
                                                        BackgroundColor="Transparent"
                                                        Clicked="OpenCS1Map"
                                                        FontSize="12"
                                                        Margin="160,0,0,0"
                                                        HeightRequest="22"
                                                        Padding="0"
                                                        VerticalOptions="Center"/>
                                            </HorizontalStackLayout>

                                            <!-- Địa chỉ -->
                                            <Label Text="47 Nguyễn Huy Lượng, Phường Bình Thạnh"
                                                   FontSize="13"
                                                   TextColor="Black"
                                                   LineBreakMode="WordWrap"
                                                   MaxLines="3"/>

                                        </VerticalStackLayout>
                                    </Frame>

                                    <!-- Ô Cơ sở 2 -->
                                    <Frame Grid.Row="1"
                                           BackgroundColor="#F0F8FF"
                                           CornerRadius="8"
                                           Padding="12"
                                           HasShadow="False">

                                        <VerticalStackLayout Spacing="10">

                                            <!-- Tiêu đề + nút xem bản đồ cùng hàng -->
                                            <HorizontalStackLayout Spacing="8"
                                                                   VerticalOptions="Center">

                                                <Label Text="🏥 Cơ sở 2"
                                                       FontSize="14"
                                                       FontAttributes="Bold"
                                                       TextColor="{StaticResource PrimaryColor}"
                                                       HorizontalOptions="StartAndExpand"/>

                                                <Button Text="🗺️ Xem bản đồ"
                                                        TextColor="{StaticResource PrimaryColor}"
                                                        BackgroundColor="Transparent"
                                                        Clicked="OpenCS2Map"
                                                        Margin="160,0,0,0"
                                                        FontSize="12"
                                                        HeightRequest="22"
                                                        Padding="0"
                                                        VerticalOptions="Center"/>
                                            </HorizontalStackLayout>

                                            <!-- Địa chỉ -->
                                            <Label Text="Số 12 Đường 400, Phường Tăng Nhơn Phú"
                                                   FontSize="13"
                                                   TextColor="Black"
                                                   LineBreakMode="WordWrap"
                                                   MaxLines="3"/>

                                        </VerticalStackLayout>
                                    </Frame>

                                </Grid>

                                <!-- Ghi chú nhỏ -->
                                <Label Text="*Nhấn 'Xem bản đồ' để xem trên Google Maps"
                                       FontSize="11"
                                       TextColor="Gray"
                                       HorizontalOptions="Center"
                                       Margin="0,5,0,0"/>
                            </VerticalStackLayout>
                        </VerticalStackLayout>
                    </Frame>

                </Grid>
            </ScrollView>

            <Frame x:Name="FloatingCallButton"
                   WidthRequest="60"
                   HeightRequest="60"
                   CornerRadius="35"
                   Padding="0"
                   HasShadow="True"
                   HorizontalOptions="Start"
                   VerticalOptions="Start"
                   Margin="20,70,40,70"
                   ZIndex="10"
                   AbsoluteLayout.LayoutFlags="PositionProportional"
                   AbsoluteLayout.LayoutBounds="1,1,-1,-1">

                <!-- Background với gradient màu da cam loang -->
                <Frame.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#FFA500" Offset="0.0"/>
                        <GradientStop Color="#FF8C00" Offset="0.5"/>
                        <GradientStop Color="#FF7F00" Offset="1.0"/>
                    </LinearGradientBrush>
                </Frame.Background>

                <Frame.Shadow>
                    <Shadow Brush="#FF8C00"
                   Opacity="0.4"
                   Offset="0,5"
                   Radius="12"/>
                </Frame.Shadow>

                <Grid BackgroundColor="Transparent"
                      WidthRequest="70"
                      HeightRequest="70">

                    <!-- PanGestureRecognizer để kéo thả -->
                    <Grid.GestureRecognizers>
                        <PanGestureRecognizer PanUpdated="OnPanGestureUpdated"/>
                        <TapGestureRecognizer Tapped="OnCallHospitalClicked"/>
                    </Grid.GestureRecognizers>

                    <!-- Hiệu ứng vòng tròn lan tỏa -->
                    <Ellipse WidthRequest="60"
                             HeightRequest="60"
                             HorizontalOptions="Center"
                             VerticalOptions="Center">
                        <Ellipse.Fill>
                            <RadialGradientBrush Center="0.5,0.5" Radius="0.8">
                                <GradientStop Color="#40FFFFFF" Offset="0.0"/>
                                <GradientStop Color="#10FFFFFF" Offset="0.5"/>
                                <GradientStop Color="Transparent" Offset="1.0"/>
                            </RadialGradientBrush>
                        </Ellipse.Fill>
                    </Ellipse>

                    <!-- Icon điện thoại màu trắng -->
                    <Image Source="phone1.png"
                           WidthRequest="36" 
                           HeightRequest="36"
                           HorizontalOptions="Center"
                           VerticalOptions="Center">

                        <Image.Shadow>
                            <Shadow Brush="Black"
                                    Opacity="0.7"
                                    Offset="0,3"
                                    Radius="5"/>
                        </Image.Shadow>
                    </Image>

                    <!-- Hiệu ứng khi nhấn -->
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal">
                                <VisualState.Setters>
                                    <Setter Property="Scale" Value="1"/>
                                    <Setter Property="Opacity" Value="1"/>
                                </VisualState.Setters>
                            </VisualState>
                            <VisualState x:Name="Pressed">
                                <VisualState.Setters>
                                    <Setter Property="Scale" Value="0.85"/>
                                    <Setter Property="Opacity" Value="0.8"/>
                                </VisualState.Setters>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                </Grid>
            </Frame>

        </AbsoluteLayout>
    </Grid>
</ContentPage>